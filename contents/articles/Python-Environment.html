<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Wrap-up Python Environment" />
    <meta name="keywards" content="Python Environment" />
    <meta name="author" content="Kritdikoon Woraitthinan" />
    <title>WRAP-UP: Python Environment</title>
    <link rel="stylesheet" href="/contents_resources/styles/mainStyles.css" />
    <link rel="icon" type="image/png" href="/images/J_favicon/favicon.ico" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-HDYFX99SK4"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-HDYFX99SK4");
    </script>
  </head>

  <body>
    <!-- NAVNIGATION BAR -->
    <p style="padding: 20px;"></p>

    <div class="navbar">
      <a class="main" href="https://jingwora.github.io">
        <img src="/images/J_favicon/favicon.ico" width="15" />
      </a>
      <a href="https://jingwora.github.io/contents.html">◀ CONTENTS</a>
    </div>

    <!-- CONTENT -->

    <h1>
      WRAP-UP: <br />
      Python Environment
    </h1>

    <!-- Table of Contents -->

    <h2>TOC</h2>
    <p><a href="#navh01">venv</a></p>
    <p><a href="#navh02">pipenv</a></p>
    <p><a href="#navh03">conda env</a></p>
    <hr />

    <p>
      In many cases, different applicaations require different version of python
      and package version. The solution for this problem is to create a virtual
      environment, a self-contained directory tree that contains a Python
      installation for a particular version of Python, plus a number of
      additional packages.
    </p>

    <!-- venv -->

    <div id="navh01"></div>
    <div style="padding-top: 2em;"></div>
    <h2>venv</h2>
    <p><a href="#TOP">[TOP]</a></p>

    <p>venv is a lightweight built-in module in python3.3 or higher.</p>
    <p>
      <b>Pros:</b> <br />
      ・Build-in module no need package installation.
    </p>
    <p>
      <b> Cons:</b> <br />
      ・Cannot create environment in different python version.<br />
      ・Need to activate from the path location.
    </p>

    <p>
      <code>python -m venv &lt;env_name&gt;</code><br />
      ・To create new virtual environment in current path.
    </p>

    <p>
      <code>&lt;env_name&gt;\Scripts\activate.bat</code><br />
      ・To activate virtual environment.
    </p>

    <p>
      <code>deactivate</code><br />
      ・Deactivate environment (remove directory).
    </p>

    <p>
      <code>rmdir &lt;env_name&gt; /s</code><br />
      ・Delete Environment.
    </p>

    <hr />
    <br />

    <!-- pipenv -->

    <div id="navh02"></div>
    <div style="padding-top: 2em;"></div>
    <h2>pipenv</h2>
    <p><a href="#TOP">[TOP]</a></p>

    <p>
      Pipenv is quite a new tool to help manage environment and packages similar
      to npm, yarn, etc. User no longer need to use pip and virtualenv
      separately.
    </p>
    <p>
      Managing a requirements.txt file can be problematic, so Pipenv uses
      Pipfile and Pipfile.lock to separate abstract dependency declarations from
      the last tested combination.
    </p>
    <p>
      Hashes are used everywhere, always. Security. Automatically expose
      security vulnerabilities.
    </p>
    <p>
      <b>Pros:</b> <br />
      ・Combination of pip and virtualenv.<br />
      ・No need to mannually create virtual environment.<br />
      ・Security check<br />
      ・It can create variable in .env.
    </p>

    <p>
      <b>Cons:</b> <br />
      ・Need to install package.
    </p>

    <p>
      <code>pip install pipenv</code><br />
      ・To install pipenv.
    </p>

    <p>
      <code>pipenv install &lt;package&gt;</code><br />
      <code>pipenv install requests</code><br />
      ・To install package via pipenv.
    </p>

    <p>
      <code>pipenv install -r ./requirements.txt</code><br />
      ・To install package via pipenv from requirements.txt.
    </p>

    <p>
      <code>pipenv install pytest --dev</code><br />
      ・To pytest only for dev environment.
    </p>

    <p>
      <code>pipenv uninstall &lt;package&gt;</code><br />
      <code>pipenv uninstall request</code><br />
      ・To uninstall package from pipenv.
    </p>

    <p>
      <code>pipenv shell</code><br />
      ・To activate pipenv environment.
    </p>

    <p>
      <code>exit</code><br />
      ・To deactivate pipenv environment.
    </p>

    <p>
      <code>pipenv run python</code><br />
      ・To run python in pipenv environment.
    </p>

    <p>
      <code>pipenv run python script.py</code><br />
      ・To run python script in pipenv environment.
    </p>

    <p>
      <code>pipenv lock -r > requirements.txt</code><br />
      ・To create lock for requirements.txt.
    </p>

    <p>
      <code>pipenv --python 3.6</code><br />
      ・To change python version in pipenv.
    </p>

    <p>
      <code>pipenv --rm</code><br />
      ・To remove pipenv environment. (Pipfile is not deleted)
    </p>

    <p>
      <code>pipenv install</code><br />
      ・To create pipenv from Pipfile.
    </p>

    <p>
      <code>pipenv check</code><br />
      ・To run security check.
    </p>

    <p>
      <code>pipenv graph</code><br />
      ・To show dependency tree.
    </p>

    <p>
      <code>pipenv lock</code><br />
      ・To update pipfile.lock.
    </p>

    <p>
      <code>pipenv install --ignore-pipfile</code><br />
      ・To install from pipfile.lock.
    </p>

    <hr />
    <br />

    <!-- conda -->

    <div id="navh03"></div>
    <div style="padding-top: 2em;"></div>
    <h2>conda env</h2>
    <p><a href="#TOP">[TOP]</a></p>

    <p>
      With conda, user can create, export, list, remove, and update environments
      that have different versions of Python and/or packages installed in them.
    </p>
    <p>
      <b>Pros:</b> <br />
      ・User can control both python version and package version. <br />
      ・User can create environment yml file.
    </p>
    <p>
      <b>Cons: </b><br />
      ・It requires to install anaconda.
    </p>

    <p>
      <code>conda create -n &lt;env_name&gt;</code><br />
      ・To create new virtual environment.
    </p>

    <p>
      <code>conda create -n &lt;env_name&gt; python=3.6</code><br />
      ・To create new virtual environment with specific python version.
    </p>

    <p>
      <code>conda create -n &lt;env_name&gt; python=3.6 numpy==1.17.4</code
      ><br />
      ・To create new virtual environment with specific python version and
      package.
    </p>

    <p>
      <code>conda env list</code><br />
      <code>conda info --envs</code><br />
      ・To list all environments.
    </p>

    <p>
      <code>conda activate &lt;env_name&gt;</code><br />
      ・To activate virtual environment.
    </p>

    <p>
      <code>conda deactivate</code><br />
      ・Deactivate environment (remove directory).
    </p>

    <p>
      <code>conda remove -n &lt;env_name&gt; --all</code><br />
      ・Delete Environment.
    </p>

    <p>
      <code>conda env export &gt; environment.yml</code><br />
      ・Exporting the environment.yml file.
    </p>

    <p>
      <code>conda env create -f environment.yml</code><br />
      ・Create environment with yml file.
    </p>

    <p>
      <code>conda -h</code><br />
      ・Conda help
    </p>

    <hr />
    <br />

    <!-- Appendix -->

    <h2>Appendix</h2>

    <h3>Python command line</h3>

    <table class="t1">
      <tr>
        <th>Code</th>
        <th>Explaination</th>
      </tr>

      <tr>
        <td>cls</td>
        <td>Clear screen</td>
      </tr>

      <tr>
        <td>pip list</td>
        <td>To show all current packages including pip and setuptools.</td>
      </tr>

      <tr>
        <td>pip freeze</td>
        <td>To show all current packages in requirements format.</td>
      </tr>

      <tr>
        <td>pip freeze > requirements.txt</td>
        <td>To create requirements file.</td>
      </tr>

      <tr>
        <td>where python</td>
        <td>To get path of current python command.</td>
      </tr>

      <tr>
        <td>
          pip install &lt;package name&gt; <br />
          Ex:<br />
          pip install nampy
        </td>
        <td>To install package in lastest version.</td>
      </tr>

      <tr>
        <td>
          pip install &lt;package name&gt;==&lt;version&gt; <br />
          Ex:<br />
          pip install numpy==1.17.4
        </td>
        <td>To install python package with specific version.</td>
      </tr>

      <tr>
        <td>pip install -r requirements.txt <br /></td>
        <td>To install from requirements.txt.</td>
      </tr>

      <tr>
        <td>
          python --version<br />
          python -V
        </td>
        <td>To check python version.</td>
      </tr>

      <tr>
        <td>python</td>
        <td>Open python</td>
      </tr>

      <tr>
        <td>exit()</td>
        <td>Exit python</td>
      </tr>
    </table>
    <hr />
    <br />

    <h3>Python Snippet</h3>

    <p>
      To python version:<br />
      <code
        >import sys<br />
        print(sys.version)
        <br />
      </code>
      3.7.7 (default, May 6 2020, 11:45:54) [MSC v.1916 64 bit (AMD64)]
    </p>
    <br />

    <p>
      To check package version:<br />
      <code
        >import tensorflow as tf<br />
        print(tf.__version__)<br />
      </code>
      2.3.0
    </p>

    <div style="padding-top: 10em;"></div>

    <!-- Ending of Content -->
    <hr />
    <footer>
      &copy; Jingwora All rights reserved.
    </footer>

    <!-- Script -->
  </body>
</html>
